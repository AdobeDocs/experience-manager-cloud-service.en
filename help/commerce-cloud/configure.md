---
title: Configure CIF
description: Configure CIF
---

# Configure CIF on AEM as a Cloud Service

This guide helps you configuring CIF on AEM as a Cloud Service.


## Creating Multiple Category and Product Pages

[AEM CIF Core Components](https://github.com/adobe/aem-core-cif-components) provides content authors the ability to create additional category and product pages. These pages can be enriched with additional marketing content and configured to target specific categories and products. The following video walks through the setup of this feature.

>[!VIDEO](https://video.tv.adobe.com/v/28969/?quality=12)

You can find more information on this topic from the following resource(s):

- [AEM CIF Core Components - Multi catalog page configuration](https://github.com/adobe/aem-core-cif-components/wiki/configuration#multi-catalog-page-template-configuration)


## Multi-Store Setup

A video walkthrough detailing options for integrating multiple Magento Store Views with Adobe Experience Manager Sites. AEM Multi-Site Management features of Live Copy and Language Copy are used in conjunction with the Commerce Integration Framework to globally manage sites across regions and locales.

>[!VIDEO](https://video.tv.adobe.com/v/28952/?quality=12)

You can find more information on these topics from the following resources:

- [Magento Websites, Stores & Views](https://docs.magento.com/m2/ce/user_guide/stores/websites-stores-views.html)
- [AEM CIF Core Components - Multi store / site configuration](https://github.com/adobe/aem-core-cif-components/wiki/configuration#multi-store--site-configuration)
- [Using Multi-Site Manager](https://docs.adobe.com/content/help/en/experience-manager-learn/sites/translation/multi-site-manager-feature-video-use.html)
- [Reusing Content: Multi Site Manager and Live Copy](https://helpx.adobe.com/experience-manager/6-5/sites/administering/using/msm.html)


## Shopping Cart and Dispatcher Setup

[AEM CIF Core Components](https://github.com/adobe/aem-core-cif-components) comes with an out of the box [shopping cart](https://github.com/adobe/aem-core-cif-components/tree/master/ui.apps/src/main/content/jcr_root/apps/core/cif/components/commerce/minicart/v1/minicart) which renders a cart and checkout form. The shopping cart requires an [AEM Dispatcher with GraphQL](https://github.com/adobe/aem-core-cif-components/blob/master/dispatcher) routing setup. The following video details a local configuration and setup using a Docker image.

>[!VIDEO](https://video.tv.adobe.com/v/29656/?quality=12)

You can find more information on this topic from the following resource(s):

- [Shopping Cart](https://github.com/adobe/aem-core-cif-components/tree/master/ui.apps/src/main/content/jcr_root/apps/core/cif/components/commerce/minicart/v1/minicart)
- [AEM Dispatcher with Magento Proxy](https://github.com/adobe/aem-core-cif-components/tree/master/dispatcher)
- [Docker Hub](https://hub.docker.com/)


## Style CIF Core Components {#style-cif}

The [CIF Project archetype](https://github.com/adobe/aem-cif-project-archetype) creates a minimal Adobe Experience Manager (AEM) CIF project as a starting point for customer projects using [CIF Core Components](https://github.com/adobe/aem-core-cif-components). A default style, known as the Venia brand, is initially applied to the site. In this tutorial you will inspect a new AEM CIF project, generated by the archetype and understand how CSS and JavaScript used by CIF core components are organized. You will also create a new style using CSS to replace the default style of the Product Teaser component.

![What you will build](/help/commerce-cloud/assets/style-cif-component/what-you-will-build.png)

*A new style will be implemented for the Product Teaser component that resembles a card.*

### Prerequisites

The following tools and technologies are required:

* [Java 1.8](https://www.oracle.com/technetwork/java/javase/downloads/index.html) or [Java 11](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html) (AEM 6.5+ only)
* [Apache Maven](https://maven.apache.org/) (3.3.9 or newer)
* Adobe Experience Manager (local instance)
  * [AEM 6.5](https://docs.adobe.com/content/help/en/experience-manager-65/deploying/introduction/technical-requirements.html)
  * [AEM 6.4.4+](https://docs.adobe.com/content/help/en/experience-manager-64/release-notes/sp-release-notes.html)
* Magento running a [version compatible to the archetype](https://github.com/adobe/aem-cif-project-archetype#requirements)

### Generate a project

We will generate a new AEM CIF project using the [CIF Project archetype](https://github.com/adobe/aem-cif-project-archetype) and then override the default styles. 

**Feel free to use an existing project** (based on the CIF Project Archetype) and skip this section.

1. Determine the latest version of the CIF Project Archetype by viewing [the latest release on GitHub](https://github.com/adobe/aem-cif-project-archetype/releases/latest). In the next step replace `x.y.z` with the version of the latest release.

2. Run the following Maven command to generate a new project in [batch mode](https://maven.apache.org/archetype/maven-archetype-plugin/examples/generate-batch.html).

    ```terminal
    mvn archetype:generate -B \
        -DarchetypeGroupId="com.adobe.commerce.cif" \
        -DarchetypeArtifactId="cif-project-archetype" \
        -DarchetypeVersion=x.y.z \
        -DgroupId="com.acme.cif" \
        -DartifactId="acme-store" \
        -Dversion=0.0.1-SNAPSHOT \
        -Dpackage="com.acme.cif" \
        -DappsFolderName="acme" \
        -DartifactName="Acme Store" \
        -DcontentFolderName="acme" \
        -DpackageGroup="acme" \
        -DsiteName="Acme Store" \
        -DoptionAemVersion=6.5.0 \
        -DoptionIncludeExamples=y \
        -DoptionEmbedConnector=y
    ```

3. Build and deploy the project to a local instance of AEM:

    ```shell
    $ cd acme-store/
    $ mvn clean install -PautoInstallAll
    ```

4. Add the necessary OSGi configurations to connect your AEM instance to a Magento instance or add the configurations to the newly created project.

5. At this point you should have a working version of a storefront that is connected to a Magento instance. Navigate to the `US` > `Home` page at: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html)

    You should see that the storefront currently is using the Venia theme. Expanding the Main Menu of the storefront, you should see various categories, indicating that the connection Magento is working.

    ![Storefront configured with Venia Theme](/help/commerce-cloud/assets/style-cif-component/acme-store-configured.png)

### Introduction to Client Libraries

The CSS and JavaScript responsible for rendering the theme/styles of the storefront is managed in AEM by a [Client library](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html) or clientlibs for short. Client libraries provide a mechanism to organize CSS and Javascript in a project's code and then deliver onto the page.

The way we can apply brand specific styles to CIF Core Components is by adding and overriding the CSS managed by these client libraries. Understanding how client libraries are structured and included on the page is critical.

#### Project Client Libraries

Next we will inspect the client libraries generated automatically by the archetype. Use the IDE of your choice to [import the project generated in the previous exercise](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html#set-up-an-integrated-development-environment).

1. Navigate and expand the **ui.apps** module and expand the folder hierarchy to: `ui.apps/src/main/content/jcr_root/apps/acme/clientlibs`:

    ![ui.apps clientlibs](/help/commerce-cloud/assets/style-cif-component/ui-apps-clientli-folder.png)

    There are two folders beneath, **clientlib-base** and **theme**.

2. **clientlib-base** - This is an empty client library that simply embeds the necessary dependencies from [AEM Core Components](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/introduction.html).

    ![Clientlib-base](/help/commerce-cloud/assets/style-cif-component/clientlib-base-folderhierarchy.png)

    Below is the XML definition of **clientlib-base** (the `.content.xml` file):

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
        jcr:primaryType="cq:ClientLibraryFolder"
        allowProxy="{Boolean}true"
        categories="[acme.wcm.base]"
        embed="[core.wcm.components.accordion.v1,core.wcm.components.tabs.v1,core.wcm.components.carousel.v1,core.wcm.components.image.v2,core.wcm.components.breadcrumb.v2,core.wcm.components.search.v1,core.wcm.components.form.text.v2]"/>
    ```

    `acme.wcm.base` is the category for this client library. Think of a catgory as a tag. This will be used to include or embed the library on the page. 

    Notice the `embed` property and the array of other clientlib categories. Each of these categories represent a client library. For example, `core.wcm.components.accordion.v1` includes the javascript needed for the [Accordion component](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/components/accordion.html) to work.

    By using the `embed` and `categories` properties you can manage and include client libraries from different projects.

     `allowProxy=true` ensures that the client library CSS and JavaScript will be served from a path prefixed with: `/etc.clientlibs`. This ensures that application code under `/apps` remains protected from end-users but CSS and JavaScript necessary for the website to function can be served anonymously. More details about the [allowProxy property can be found here](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html#locating-a-client-library-folder-and-using-the-proxy-client-libraries-servlet).

3. **theme** - This is the client library that contains the starting theme and CSS for the CIF project. This client library is designed to be customized by each implementation, and it is helpful to start with some existing styles so that the components are functional to start with.

    ![theme clientlibrary](/help/commerce-cloud/assets/style-cif-component/clientlib-theme-folder-hierarchy.png)

    Below is the XML definition of **theme**:

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
        jcr:primaryType="cq:ClientLibraryFolder"
        allowProxy="{Boolean}true"
        categories="[acme.theme]"/>
    ```

    `acme.theme` is the category for this client library and this is how the client library will be included on the page.

4. Beneath the **theme** client library you should see a file named **css.txt** located at: `ui.apps/src/main/content/jcr_root/apps/acme/clientlibs/theme/css.txt`:

    ```plain
    #base=.
    common/common.css

    components/button/button.css

    components/featuredcategorylist/categorylist.css

    ...
    ```

    The **css.txt** (and **js.txt**) act as manifests that dictate the order in which individual files are included in the final CSS file. Order matters for both CSS and JavaScript and it is nice to be able to create multiple files in order to manage the code better. Looking through the **css.txt** file you can see that files are organized by the components the styles are applied to.

5. Inspect the CSS files beneath the **theme/components** to get an idea of the ootb component styles. We will update some of these files later in the tutorial.

#### Client Library inclusion with Base Page Component

Next we will inspect how client libraries are included on a page using [HTL](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html#using-htl) and the Page component.

1. In the **ui.apps** module, navigate to the `page` component definition under: `ui.apps/src/main/content/jcr_root/apps/acme/components/structure/page`. This **page** component, generated by the archetype, is the entry point used to render  all the pages in the project.

2. If you inspect the **page** component's definition (`page/.content.xml`) you will notice a property `sling:resourceSuperType` that points to `core/cif/components/structure/page/v1/page`. This means that our project's (Acme) **page** component will inherit all of the functionality of the [CIF Core Page](https://github.com/adobe/aem-core-cif-components/tree/master/ui.apps/src/main/content/jcr_root/apps/core/cif/components/structure/page/v1/page) component, and allowing us to manage less code.

3. Beneath the **page** component you will find two files: **customheaderlibs.html** and **customfooterlibs.html**.

    ```html
    <!--/* customheaderlibs.html */-->
    <sly data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"
     data-sly-call="${clientlib.css @ categories='acme.wcm.base'}"/>
    ```

    **customheaderlibs.html** is an HTL script that will be rendered at the head of the page. It is a common script to override and add project specific logic. In this case we are using it to include the client library with a category of `acme.wcm.base`. Following web development best practices, we only include the CSS in the head of the page.

    ```html
    <!--/* customfooterlibs.html */-->
    <sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html">
        <sly data-sly-call="${clientlib.js @ categories='acme.wcm.base'}"/>
    </sly>
    ```

    **customfooterlibs.html** is an HTL script that will be rendered at the bottom of the page, right before the closing `</body>` tag. Again the category of `acme.wcm.base` is used but this time only the JavaScript of the client library will be loaded.

Modifying the HTL scripts of the **page** component is how `acme.wcm.base` is included on all of the pages. However what about `acme.theme`? In the next exercise we will look at another option for including client libraries.

#### Client Library inclusion with Page Templates

There are several options for how to include a client-side library. Next we will inspect how the generated project includes the theme client-side libraries via [Page Templates](https://docs.adobe.com/content/help/en/experience-manager-65/developing/platform/templates/page-templates-editable.html).

Open a new browser and login to the AEM instance in which you deployed the project at the beginning of this tutorial.

1. From the AEM Start screen navigate to **Tools** > **General** > **Templates**.

    ![Template Navigation](/help/commerce-cloud/assets/style-cif-component/template-location.png)

2. Navigate into the **Acme Store Configuration** folder. Open the **Category Page Template** by selecting the *pencil* icon.

    ![category page template card](/help/commerce-cloud/assets/style-cif-component/category-page-template.png)

3. In the upper left-hand corner, select the **Page Information** icon and click **Page Policy**.

    ![Page policy menu item](/help/commerce-cloud/assets/style-cif-component/page-policy-menu.png)

4. This will open the Page Policy for the Catalog Page template:

    ![Page Policy - catalog page](/help/commerce-cloud/assets/style-cif-component/page-policy-properties.png)

    On the right-hand side you can see a listing of Client Libraries **categories** that will be included on all pages that use this template.

    * **wcm.foundation.components.page.responsive** - Provides the CSS needed to enable [responsive layout](https://docs.adobe.com/content/help/en/experience-manager-65/authoring/siteandpage/responsive-layout.html) controls by authors.
    * **acme.theme** - This is the starting theme that the archetype generates automatically. By default this styled like the sample Venia demo store. However as you can see from the name, it is intended to be customized by the project implementation. *This is what we will be modifying in the next section!*
    * **core.cif.components.react** - This is a compiled Client Library of several React components used for dynamic features like the Shopping Cart. More [information can be found here](https://github.com/adobe/aem-core-cif-components/tree/master/react-components).

    Notice that other templates use the same policy, **Content Page**, **Landing Page**, etc... By re-using the same policy, we can ensure that the same client libraries are included on all of the pages.

    The advantage of using Templates and Page policies to manage the inclusion of client libraries is that you can change the policy per template. For example, perhaps you are managing two different brands within the same AEM instance. Each brand will have its own unique style or *theme* but the base libraries and code will be the same. Another example, if you had a larger client library that you only wanted to appear on certain pages, you could make a unique page policy just for that template. The other advantage

#### Verify Client Libraries on the Page

At this point we have reviewed how to include client libraries using HTL with the **customheaderlibs.html** and **customfooterlibs.html** scripts and how a Template's page policy can be used to include additional client libraries. Next we will verify the inclusion of the client libraries on the site.

1. From the AEM Start screen navigate to **Sites** > **Acme Store** > **United States** > **English** and open the page for editing: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html).

2. Select the **Page Information** menu and click **View as Published**:

    ![View as Published](/help/commerce-cloud/assets/style-cif-component/view-as-published.png)

    This will open the page without any of the AEM author javascript loaded, as it would appear on the published site. Notice that the url has the query parameter `?wcmmode=disabled` appendended. When developing CSS and Javascript it is a good practice to use this parameter to simplify the page with out anything from AEM author.

3. View the page source and you should be able to identify the following client libraries are included: **acme.wcm.base**, **wcm.foundation.components.page.responsive**, **acme.theme**, **core.cif.components.react**

    ```html
    <!DOCTYPE html>
    <html lang="en-US">
    <head>
        ...
        <link rel="stylesheet" href="/etc.clientlibs/acme/clientlibs/clientlib-base.css" type="text/css">
        <link rel="stylesheet" href="/libs/wcm/foundation/components/page/responsive.css" type="text/css">
        <link rel="stylesheet" href="/etc.clientlibs/acme/clientlibs/theme.css" type="text/css">
    </head>
    ...

        <script type="text/javascript" src="/etc.clientlibs/core/cif/clientlibs/react-components.js"></script>
        <script type="text/javascript" src="/etc.clientlibs/acme/clientlibs/clientlib-base.js"></script>
    </body>
    </html>
    ```

### Style the Product Teaser

Now that we understand the client library structure generated by the archetype, we can begin to customize the CIF components. We will modify the styles of the Product Teaser component so that it looks more like a "card".

#### Author the Product Teaser

As a first step, we will add a new instance of the Product Teaser component to the home page of our site using the AEM authoring tools.

1. Open a new browser tab and navigate to the **Home Page** of the site: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html).
2. Insert a new **Product Teaser** Component into the main layout container on the page.

    ![Insert Product Teaser](/help/commerce-cloud/assets/style-cif-component/product-teaser-add-component.png)

3. Expand the Side Panel (if not already toggled) and switch the asset finder dropdown to **Products**. This should display a list of available products from a connected Magento instance. Select a product and **drag+drop** it onto the **Product Teaser** component on the page.

    ![Drag + Drop Product Teaser](/help/commerce-cloud/assets/style-cif-component/drag-drop-product-teaser.png)

    > Note, you can also configure the displayed product by configuring the component using the dialog (clicking the *wrench* icon).

4. You should now see a Product being displayed by the Product Teaser. The Name of the product and the Price of the product are default attributes that are displayed.

    ![Product Teaser - default style](/help/commerce-cloud/assets/style-cif-component/product-teaser-default-style.png)

#### Update the CSS for the Product Teaser

Next we will modify the CSS in the **theme** client library in order to implement a card-like style for the Product Teaser.

Return to the IDE and the generated project.

1. In the **ui.apps** module navigate to folder: `ui.apps/src/main/content/jcr_root/apps/acme/clientlibs/theme/components/productteaser`. This is where all of the styles for the Product Teaser are defined.
2. Open the file **teaser.css** and update the corresponding CSS rules (or download the [solution teaser.css file](/help/commerce-cloud/assets/style-cif-component/solution-teaser.css) and replace).

    Add a drop-shadow and include rounded corners to the Product Teaser.

    ```css
     .productteaser .item__root {
         position: relative;
         box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
         transition: 0.3s;
         border-radius: 5px;
         float: left;
         margin-left: 12px;
         margin-right: 12px;
    }

    .productteaser .item__root:hover {
       box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }
    ```

    Change the border for the image in the Product Teaser.

    ```css
    .productteaser .item__image {
        border-bottom: 1px solid #c0c0c0;
        display: block;
        grid-area: main;
        height: auto;
        opacity: 1;
        transition-duration: 512ms;
        transition-property: opacity, visibility;
        transition-timing-function: ease-out;
        visibility: visible;
        width: 100%;
     }
    ```

    Update the Product's name to appear at the bottom of the teaser and modify the text color.

    ```css
    .productteaser .item__name {
        color: #000;
        display: block;
        float: left;
        font-size: 22px;
        font-weight: 900;
        line-height: 1em;
        padding: 0.75em;
        text-transform: uppercase;
        width: 75%;
    }
    ```

    Update the Product's price to also appear in the bottom of the teaser and modify the text color.

    ```css
    .productteaser .item__price {
        color: #000;
        display: block;
        float: left;
        font-size: 18px;
        font-weight: 900;
        padding: 0.75em;
        padding-bottom: 2em;
        width: 25%;
    }
    ```

    Update the media query at the bottom, to stack the name and price in screens smaller than 992px.

    ```css
    @media (max-width: 992px) {
        .productteaser .item__name {
            font-size: 18px;
            width: 100%;
        }
        .productteaser .item__price {
            font-size: 14px;
            width: 100%;
        }
    }
    ```

    Save the changes to **teaser.css**. You can download the [solution teaser.css file here](/help/commerce-cloud/assets/style-cif-component/solution-teaser.css).

3. Deploy the updates of the **ui.apps** module to AEM using your Maven skills, from a command line terminal:

    ```shell
    $ cd acme-store/ui.apps/
    $ mvn -PautoInstallPackage clean install
    ...
    saving approx 0 nodes...
    Package imported.
    Package installed in 61ms.
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time:  6.903 s
    [INFO] Finished at: 2020-02-06T13:21:36-08:00
    [INFO] ------------------------------------------------------------------------
    ```

    > Note, there are [additional IDE setup and tools](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html#set-up-an-integrated-development-environment) that can sync project files directly to a local AEM instance without having to perform a full Maven build.

#### View Updated Product Teaser

After the code for the project has been deployed to AEM, we should now be able to see the changes to the Product Teaser.

1. Return to your browser and re-fresh the Home page: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html). You should see the updated product teaser styles applied.

    ![Updated Product Teaser style](/help/commerce-cloud/assets/style-cif-component/product-teaser-new-style.png)

2. Experiment by adding additional Product teasers. Use Layout Mode to change the width and offset of the components in order to display multiple teasers in a row.

    ![Multiple Product Teasers](/help/commerce-cloud/assets/style-cif-component/multiple-teasers-final.png)

    Notice that each product teaser contains the same style.

#### Troubleshooting

You can verify in [CRXDE-Lite](http://localhost:4502/crx/de/index.jsp) that the updated CSS file has been deployed: [http://localhost:4502/crx/de/index.jsp#/apps/acme/clientlibs/theme/components/productteaser/teaser.css](http://localhost:4502/crx/de/index.jsp#/apps/acme/clientlibs/theme/components/productteaser/teaser.css)

When deploying new CSS and/or JavaScript files it is also important to ensure the browser is not serving stale files. You can eliminate this by clearing the browser cache or starting a fresh browser session.

AEM also attempts to cache client libraries for performance. Occasionally, following a code deployment the older files are served. You can manually invalidate AEM's client library cache using the [Rebuild Client Libraries tool](http://localhost:4502/libs/granite/ui/content/dumplibs.rebuild.html). *Invalidate Caches is the preferred method if you suspect AEM has cached an old version of a client library. Rebuild Libraries is inefficient and time consuming.*

#### Congratulations!

You just styled your first CIF component!

#### Bonus Challenge

Use the [AEM Style system](https://docs.adobe.com/content/help/en/experience-manager-65/developing/components/style-system.html) to create two styles that can be toggled on/off by a content author. [Developing with the Style System](https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/style-system.html) includes detailed steps and information on how to accomplish this.

![Bonus Challenge - style System](/help/commerce-cloud/assets/style-cif-component/bonus-challenge.png)


## Customize CIF Core Components {#customize-cif}

[CIF Core Components](https://github.com/adobe/aem-core-cif-components) provides a standard set of Commerce components that can be used to accelerate a project that integrates Adobe Experience Manager (AEM) and Magento solutions. These components are production ready and can be [easily styled with CSS](#style-cif). Many implementations will also want to extend these components to meet business specific requirements.

In this tutorial we will review several different extension points provided by CIF Core Components and AEM in general. We will do this by extending the capabilities of the [Product Teaser](https://github.com/adobe/aem-core-cif-components/tree/master/ui.apps/src/main/content/jcr_root/apps/core/cif/components/commerce/productteaser/v1/productteaser) component to include the ability to render a "New" banner. Content authors will have the ability to turn toggle this banner and determine how long to display the banner. The "age" of the product will be based on it's creation date in the Magento catalog. Once a product is a certain amount of days old, the "New" banner should automatically disappear.

 ![New Banner extended](/help/commerce-cloud/assets/customize-cif-components/new-banner-productteaser.png)

### Prerequisites

The following tools and technologies are required:

* [Java 1.8](https://www.oracle.com/technetwork/java/javase/downloads/index.html) or [Java 11](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html) (AEM 6.5+ only)
* [Apache Maven](https://maven.apache.org/) (3.3.9 or newer)
* Adobe Experience Manager (local instance)
  * [AEM 6.5](https://docs.adobe.com/content/help/en/experience-manager-65/deploying/introduction/technical-requirements.html)
  * [AEM 6.4.4+](https://docs.adobe.com/content/help/en/experience-manager-64/release-notes/sp-release-notes.html)
* Magento running a [version compatible with Archetype 0.7.0](https://github.com/adobe/aem-cif-project-archetype#requirements)

It is recommended to review the following content before proceeding with this tutorial:

* [Introducing Commerce Integration Framework on AEM as a Cloud Service](overview.md)
* [Style CIF Core Components - Tutorial](#style-cif)

### Starter Project

We have provided a starter project to be used with this tutorial. The project was generated using [v0.7.0](https://github.com/adobe/aem-cif-project-archetype/releases/tag/cif-project-archetype-0.7.0) of the CIF Project Archetype. It is considered a best practice to always use the [latest release](https://github.com/adobe/aem-cif-project-archetype/releases/latest) of the archetype when starting a new project.

1. Download the starter project [**acme-store.zip**](/help/commerce-cloud/assets/customize-cif-components/acme-store.zip) to your desktop.
2. Unzip **acme-store.zip** and you should see the following folder structure:

    ```plain
    /acme-store
       /ui.content
       /ui.apps
       /samplecontent
       /core
       /all
       + pom.xml
       + README.md
    ```

3. Open a new terminal window and build and deploy the project to a local instance of AEM;

    ```shell
    $ cd acme-store/
    $ mvn clean install -PautoInstallAll
    ```

4. Add the necessary OSGi configurations to connect your AEM instance to a Magento instance or add the configurations to the newly created project.

5. At this point you should have a working version of a storefront that is connected to a Magento instance. Navigate to the `US` > `Home` page at: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html)

    You should see that the storefront currently is using the Venia theme. Expanding the Main Menu of the storefront, you should see various categories, indicating that the connection Magento is working.

    ![Storefront configured with Venia Theme](/help/commerce-cloud/assets/customize-cif-components/acme-store-configured.png)

### Author the Product Teaser

We will be extending the Product Teaser Component throughout this tutorial. As a first step, we will add a new instance of the Product Teaser to the Home page in order to understand the baseline functionality.

1. Navigate to the **Home Page** of the site: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html)
2. Insert a new **Product Teaser** Component into the main layout container on the page.

    ![Insert Product Teaser](/help/commerce-cloud/assets/customize-cif-components/product-teaser-add-component.png)

3. Expand the Side Panel (if not already toggled) and switch the asset finder dropdown to **Products**. This should display a list of available products from a connected Magento instance. Select a product and **drag+drop** it onto the **Product Teaser** component on the page.

    ![Drag + Drop Product Teaser](/help/commerce-cloud/assets/customize-cif-components/drag-drop-product-teaser.png)

    > Note, you can also configure the displayed product by configuring the component using the dialog (clicking the *wrench* icon).

4. You should now see a Product being displayed by the Product Teaser. The Name of the product and the Price of the product are default attributes that are displayed.

    ![Product Teaser - default style](/help/commerce-cloud/assets/customize-cif-components/product-teaser-default-style.png)

### Customizing the markup of the Product Teaser

A common extension of AEM components is to modify the markup generated by the component. This is done by overriding the [HTL script](https://docs.adobe.com/content/help/en/experience-manager-htl/using/overview.html) that the component uses to render its markup. HTML Template Language (HTL), is a lightweight templating language that AEM components use to dynamically render markup based on authored content, allowing the components to be re-used. The Product Teaser, for example, can be re-used over and over again to display different products. 

In our case we want to render a banner on top of the teaser to indicate that the product is "New" and has been recently added to the catalog. The design pattern for [customizing the markup](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/developing/customizing.html#customizing-the-markup) of a component is actually standard for all AEM Components, not just for the CIF Core Components.

Use the IDE of your choice to [open the starter project downloaded](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html#set-up-an-integrated-development-environment) at the beginning of the tutorial.

1. Navigate and expand the **ui.apps** module and expand the folder hierarchy to: `ui.apps/src/main/content/jcr_root/apps/acme/components/commerce/productteaser` and inspect the `.content.xml` file.

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
        jcr:description="Product Teaser Component"
        jcr:primaryType="cq:Component"
        jcr:title="Product Teaser"
        sling:resourceSuperType="core/cif/components/commerce/productteaser/v1/productteaser"
        componentGroup="acme"/>
    ```

    Above is the Component definition for the Product Teaser Component in our project. Notice the property `sling:resourceSuperType="core/cif/components/commerce/productteaser/v1/productteaser"`. This is an example of creating a [Proxy component](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/get-started/using.html#create-proxy-components). Instead of copying and pasting all of the Product Teaser HTL scripts from the CIF Core Components, we can use the `sling:resourceSuperType` to inherit all of the functionality.

2. Open a new browser and navigate to [CRXDE-Lite](http://localhost:4502/crx/de/index.jsp#/apps/core/cif/components/commerce/productteaser/v1/productteaser) in AEM. Expand the tree to view the `productteaser` component under: `/apps/core/cif/components/commerce/productteaser/v1/productteaser`:

    ![CRXDE Lite Product Teaser](/help/commerce-cloud/assets/customize-cif-components/crxde-productteaser.png)

    This is the full component definition for the Product Teaser component.

3. Switch back to your IDE and the Acme Store project. Create a new file named `productteaser.html` beneath `ui.apps/src/main/content/jcr_root/apps/acme/components/commerce/productteaser`.

4. Copy the contents of `productteaser.html` from [CRXDE-Lite](http://localhost:4502/crx/de/index.jsp#/apps/core/cif/components/commerce/productteaser/v1/productteaser/productteaser.html) and paste it into the Acme-Store project in the newly created `productteaser.html` file.

    ![Product Teaser html overwrite](/help/commerce-cloud/assets/customize-cif-components/productteaser-html-overwrite.png)

5. In the Acme-Store project modify the `productteaser.html` file and insert a new div that represents a badge  above the product image markup:

    ```html
    ...
    <div data-sly-test.isvalid="${product.url}" class="item__root" data-cmp-is="productteaser">
        <!-- Add Badge -->
        <div class="item__badge">
            <span>New</span>
        </div>
        <!-- end add badge -->
        <a class="item__images" href=${product.url}>
            <img class="item__image" width="100%" height="100%"
                    src="${product.image}" alt="${product.image}"/>
        </a>
        <a class="item__name" href=${product.url}><span>${product.name}</span></a>
        <div class="item__price">
            <span> ${product.formattedPrice} </span>
        </div>
        <sly data-sly-call="${actionsTpl.actions @ product=product}"></sly>
    </div>
    ```

6. Deploy the updated code to the local instance of AEM using your maven skills or using [the features of your IDE](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html#set-up-an-integrated-development-environment):

    ```shell
    $ cd ui.apps
    $ mvn -PautoInstallPackage clean install
    ```

7. In the browser, return to the [Homepage of the store front](http://localhost:4502/editor.html/content/acme/us/en.html) in AEM. Refresh and you should see that a "new" Banner appears in the upper right corner of the component.

    ![New Banner extended](/help/commerce-cloud/assets/customize-cif-components/new-banner-productteaser.png)

    Currently there is no logic behind when the banner will be displayed. In the next few exercises we will correct that.

    > Note, the CSS to render the banner was provided as part of the starter project and can be found at: `ui.apps/../apps/acme/clientlibs/theme/components/productteaser/teaser.css`. For more details checkout the [Styling CIF Core Components tutorial](#style-cif).

### Customizing the Dialog of the Product Teaser

Next, we will customize the dialog of the Product Teaser component to allow an Author to determine the date range for which a product is considered "new" and if the banner should be displayed. We will do this by [customizing the dialog](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/developing/customizing.html#customizing-dialogs) of the Product Teaser as part of the Acme Store project.

1. Open the Acme Store project in the IDE of your choice and navigate to `ui.apps/src/main/content/jcr_root/apps/acme/components/commerce/productteaser`.

2. Beneath the `productteaser` folder, add a new folder named `_cq_dialog`. Add a new file to the `_cq_dialog` folder named `.content.xml`. You should now have the following file structure:

    ```plain
    ../acme
        /components
            /commerce
                /productteaser
                   /_cq_dialog
                      + .content.xml
                   /_cq_template
                   + .content.xml
                   + productteaser.html
    ```

3. Update `_cq_dialog/.content.xml` with the following XML:

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" 
        xmlns:cq="http://www.day.com/jcr/cq/1.0" 
        xmlns:jcr="http://www.jcp.org/jcr/1.0" 
        xmlns:nt="http://www.jcp.org/jcr/nt/1.0" 
        jcr:primaryType="nt:unstructured" 
        jcr:title="My Product Teaser" 
        sling:resourceType="cq/gui/components/authoring/dialog" 
        trackingFeature="cif-core-components:productteaser:v1">
        <content jcr:primaryType="nt:unstructured" 
            sling:resourceType="granite/ui/components/coral/foundation/container">
            <items jcr:primaryType="nt:unstructured">
                <tabs jcr:primaryType="nt:unstructured" 
                    sling:resourceType="granite/ui/components/coral/foundation/tabs" 
                    maximized="{Boolean}true">
                    <items jcr:primaryType="nt:unstructured">
                        <badge jcr:primaryType="nt:unstructured" 
                            jcr:title="Badge" 
                            sling:resourceType="granite/ui/components/coral/foundation/container" 
                            margin="{Boolean}true">
                            <items jcr:primaryType="nt:unstructured">
                                <columns jcr:primaryType="nt:unstructured" 
                                    sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns" 
                                    margin="{Boolean}true">
                                    <items jcr:primaryType="nt:unstructured">
                                        <column jcr:primaryType="nt:unstructured" 
                                            sling:resourceType="granite/ui/components/coral/foundation/container">
                                            <items jcr:primaryType="nt:unstructured">
                                                <badge jcr:primaryType="nt:unstructured" 
                                                    sling:resourceType="granite/ui/components/coral/foundation/form/checkbox" 
                                                    text="Display 'New' badge" 
                                                    value="true" 
                                                    uncheckedValue="false" 
                                                    name="./badge" />
                                                <age jcr:primaryType="nt:unstructured" 
                                                    sling:resourceType="granite/ui/components/coral/foundation/form/numberfield" 
                                                    fieldDescription="The maximum age in days the 'new' badge should be shown" 
                                                    fieldLabel="Max Product Age" 
                                                    name="./age"
                                                    min="{Long}0" 
                                                    value="10" />
                                                <ageTypeHint jcr:primaryType="nt:unstructured" 
                                                    sling:resourceType="granite/ui/components/foundation/form/hidden" 
                                                    ignoreData="{Boolean}true" 
                                                    name="./age@TypeHint" 
                                                    value="Long" />
                                            </items>
                                        </column>
                                    </items>
                                </columns>
                            </items>
                        </badge>
                    </items>
                </tabs>
            </items>
        </content>
    </jcr:root>
    ```

    Above we have added 2 additional fields as part of a new tab and a single hidden field.

    1. Checkbox to Display 'New' badge
    2. Number field to define the Max Product Age
    3. Hidden field to ensure that the Max Product Age is saved as a long (see [@TypeHint](https://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html) for more details)

    Dialogs defined as part of a proxy component inherit all of the existing dialog fields with a feauture known as [Sling Resource Merger](https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/sling-resource-merger.html). Therefore we con't have to re-define the existing fields that are part of the Product Teaser.

4. Update `productteaser.html` and add a `data-sly-test` to the `<div>` for the badge. This will be a simple test to decide to render the badge if the user has checked "true".

    ```html
        ...
        <div data-sly-test.isvalid="${product.url}" class="item__root" data-cmp-is="productteaser">

            <!--/* add test to see if properties.badge equals true */-->
            <div data-sly-test="${properties.badge == 'true'}" class="item__badge">
                <span>New</span>
            </div>
    ...
    ```

5. Deploy the updated code to the local instance of AEM using features of your IDE or by using your maven skills:

    ```shell
    $ cd ui.apps
    $ mvn -PautoInstallPackage clean install
    ```

6. Return to the Product Teaser component and click the *wrench* icon to open the Dialog. You should now see a tab for **Badge** with two additional fields. Updating these fields will persist the values to AEM. You should be able to toggle on/off the badge with the checkbox:

    ![Toggle badge](/help/commerce-cloud/assets/customize-cif-components/toggle-badge-checkbox.gif)

    This gives the author some control over when the badge appears. However it would be ideal for the badge to disappear automatically once the product has reached a certain age in day based on the entry for **Max Product Age**. For this we will need to implement some backend logic.

### Updating the Sling Model for the Product Teaser

Next, we will extend the business logic of the Product Teaser by implementing a Sling Model. [Sling Models](https://sling.apache.org/documentation/bundles/models.html), are annotation driven "POJOs" (Plain Old Java Objects) that implement any of the business logic needed by the component. Sling Models are used in conjunction with the HTL scripts as part of the component. We will follow the [delegation pattern for Sling Models](https://github.com/adobe/aem-core-wcm-components/wiki/Delegation-Pattern-for-Sling-Models) so that we can just extend parts of the existing Product Teaser model.

Sling Models are implemented as Java and can be found in the **core** module of the generated project.

1. Open the Acme Store project in the IDE of your choice and navigate under the **core** module to: `core/src/main/java/com/acme/cif/core/models/MyProductTeaser.java`. **MyProductTeaser.java** is a Java Interface that we pre-created that extends the CIF **ProductTeaser** interface.

2. Next, open the file **MyProductTeaserImpl.java** located at: `core/src/main/java/com/acme/cif/core/models/MyProductTeaserImpl.java`. `MyProductTeaserImpl` is the implementation class for the interface `MyProductTeaser`. 

    Using the [delegation pattern for Sling Models](https://github.com/adobe/aem-core-wcm-components/wiki/Delegation-Pattern-for-Sling-Models) we can reference the `ProductTeaser` class via the `sling:resourceSuperType` property: 

    ```java
    @Self
    @Via(type = ResourceSuperType.class)
    private ProductTeaser productTeaser;
    ```

    For all of the methods that we don't want to override or change, we can simply return the value that the `ProductTeaser` returns:

    ```java
    @Override
    public String getImage() {
        return productTeaser.getImage();
    }
    ```

3. One of the extra extension points provided by CIF Core Components is the `AbstractProductRetriever` which allows us to get access to specific product attributes. Add the following method to initialize the `AbstractProductRetriever` in the `init()` method:

    ```java
    import javax.annotation.PostConstruct;
    ...
    @Model(adaptables = SlingHttpServletRequest.class, adapters = MyProductTeaser.class, resourceType = MyProductTeaserImpl.RESOURCE_TYPE)
    public class MyProductTeaserImpl implements MyProductTeaser {
        ...
        private AbstractProductRetriever productRetriever;

        /* add this method to intialize the proudctRetriever */
        @PostConstruct
        public void initModel() {
            productRetriever = productTeaser.getProductRetriever();

        }
    ...

    ```

4. Lets test out these changes by modifying the formatted price and overriding the logic in `getFormattedPrice()`. Make the following updates so that we explicitly format the price based on the German locale. (or pick a different country!)

    ```java
    import java.util.Locale;
    import java.text.NumberFormat;
    ...

    @Override
    public String getFormattedPrice() {
         //return productTeaser.getFormattedPrice();
        NumberFormat germanCurrencyFormat = NumberFormat.getCurrencyInstance(Locale.GERMANY);
        Double price =  productRetriever.fetchProduct().getPrice().getRegularPrice().getAmount().getValue();
        if(price != null) {
            return germanCurrencyFormat.format(price);
        }
        return null;
    }
    ```

    Note how the `productRetriever` object gives us access to the `ProductInterface` object via the `fetchProduct()` method. You can see all of the [available methods here](https://github.com/adobe/commerce-cif-magento-graphql/blob/master/src/main/java/com/adobe/cq/commerce/magento/graphql/ProductInterface.java).

    > Note* modifying the locale to German is just a fun example to see the override. In reality the ProductTeaser uses the [page's locale to determine the format](https://github.com/adobe/aem-core-cif-components/blob/master/bundles/core/src/main/java/com/adobe/cq/commerce/core/components/internal/models/v1/productteaser/ProductTeaserImpl.java#L173).

5. Next we need to update the **productteaser.html** in the **ui.apps** module to reference our new Sling Model at: `com.acme.cif.core.models.MyProductTeaser`.

    ```diff
      <!--/* productteaser.html - change the use.product to point to MyProductTeaser */-->
      <sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
    -  data-sly-use.product="com.adobe.cq.commerce.core.components.models.productteaser.ProductTeaser"
    +  data-sly-use.product="com.acme.cif.core.models.MyProductTeaser"
       data-sly-use.actionsTpl="actions.html">
        ...
     ```

    Save the changes to `productteaser.html`.

6. Deploy the code base to the local instance of AEM. Since changes were made to both the **ui.apps** and **core** modules, build and deploy the project from the root:

    ```shell
    $ cd acme-store
    $ mvn -PautoInstallPackage clean install
    ```

7. Open a browser and navigate to: [http://localhost:4502/system/console/status-slingmodels](http://localhost:4502/system/console/status-slingmodels). This console shows all of the Sling Models registered in the system. Double-check to ensure the MyTeaserModelImpl got deployed and is mapped correctly. You should be able to see something like:

    ```plain
    com.acme.cif.core.models.MyProductTeaserImpl - acme/components/commerce/productteaser
    ```

8. Finally navigate to where you authored the Product Teaser component and you should now see the price with the German currency format:

    ![Price Format Updated](/help/commerce-cloud/assets/customize-cif-components/german-currency-update.png)

### Implement isShowBadge logic

Now that we have had a chance to experiment with overriding the Sling Model methods, lets implement the logic for when to display the "new" badge.

1. Return to your IDE and open the **MyProductTeaser.java** file at: `core/src/main/java/com/acme/cif/core/models/MyProductTeaser.java`.

2. Add a new method, `isShowBadge()` to the interface:

    ```java
    @ProviderType
    public interface MyProductTeaser extends ProductTeaser {
        // Extend the existing interface with the additional properties which you
        // want to expose to the HTL template.
        public Boolean isShowBadge();
    }
    ```

    This is a new method we will introduce to encapsulate the logic of whether to show the badge or not.

3. Next, re-open **MyProductTeaserImpl.java** at `core/src/main/java/com/acme/cif/core/models/MyProductTeaserImpl.java`.

4. The logic for how long the "new" badge will be displayed will be based on the `created_at` attribute of the Product. In order to have access to that attribute, we need to extend the **GraphQL** query performed by the ProductTeaser. We can do this by updating the `init()` method in **MyProductTeaserImpl.java**:

    ```java
    //MyProductTeaserImpl.java

    @PostConstruct
    public void initModel() {
        productRetriever = productTeaser.getProductRetriever();

        if (productRetriever != null) {
            // Pass your custom partial query to the ProductRetriever. This class will
            // automatically take care of executing your query as soon
            // as you try to access any product property.
            productRetriever.extendProductQueryWith(p ->
                p.addCustomSimpleField("created_at")
            );
        }
    }
    ```

    Adding to the `extendProductQueryWith` method is a powerful way to ensure additional product attributes are available to the rest of the model. It also minimizes the number of queries executed.

    > Note* in the above code we are using the `addCustomSimpleField` to retrieve the `created_at` property. This illustrates how you can query for any custom attributes that are part of the Magento schema.
    >
    > However, the `created_at` property has actually been implemented as part of the [Product Interface](https://github.com/adobe/commerce-cif-magento-graphql/blob/master/src/main/java/com/adobe/cq/commerce/magento/graphql/ProductInterface.java) and a better practice would be to re-use the method like the so: `productRetriever.extendProductQueryWith(p -> p.createdAt());`. Most of the commonly found schema attributes have been implemented, so only use the `addCustomSimpleField` for truly custom attributes.

5. Next, we will implement the `isShowBadge()` method:

    ```java
    import java.time.format.DateTimeFormatter;
    import java.util.Locale;
    import java.time.temporal.ChronoUnit;

    ...

    @Override
    public Boolean isShowBadge() {
         final DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");

         //Look at the checkbox from the dialog to see if we should even attempt to show the badge
         final boolean showBadge = properties.get("badge", false);
         if (showBadge) {

             //Look at the numberfield set from the dialog to determine the max "age" in days to compare too
             final int maxAgeProp = properties.get("age", 0);

            String createdAtString;
            try {
                //Grab the created_at property from the product
                //Here we show the example of retrieving the attribute as if it was a custom attribute
                // an alternative that would work is productRetriever.fetchProduct().getCreatedAt()
                createdAtString = productRetriever.fetchProduct().getAsString("created_at");
                log.info("***CREATED_AT**** " + createdAtString);
            } catch (SchemaViolationError e) {
                //it is possible that a schema error could be thrown if the attribute is not part of the schema
                log.error("Error determining to showBadge" , e);
                return false;
            }

             // Custom code to calc the date difference of the product creation
             // compared to today
            final LocalDate createdAt = LocalDate.parse(createdAtString, formatter);
             if (createdAt != null) {
 
                 final long ageInDays = ChronoUnit.DAYS.between(createdAt, LocalDate.now());
                 if (ageInDays < maxAgeProp) {
                     return true;
                 }
             }
         }
         return false;
     }

    ```

    In the above method we first check to see if the author has enabled the badge functionality with the checkbox. Next we read in the value of the property `age` that is set as part of the dialog and represents the maximum number of days old a product should be until the banner disappears. Finally we calculate how old the product is based on the `created_at` date. If after comparing the two values we return `true` to show the badge, `false` in all other cases.

6. Finally one more addition needs to be made to the `productteaser.html` script in order to call the `isShowBadge()` method. Open the file at `ui.apps/src/main/content/jcr_root/apps/acme/components/commerce/productteaser/productteaser.html`. Make the following update:

    ```diff
    ...
    - <div data-sly-test="${properties.badge == 'true'}" class="item__badge">
    + <div data-sly-test="${product.showBadge}" class="item__badge">
         <span>New</span>
     </div>
    ...
    ```

7. Deploy the code base to the local instance of AEM. Since changes were made to both the **ui.apps** and **core** modules, build and deploy the project from the root:

    ```shell
    $ cd acme-store
    $ mvn -PautoInstallPackage clean install
    ```

8. Return to AEM and the ProductTeaser component and experiment with different numbers to display the product's max age. Depending on how old the product is, you may need to enter some very large numbers to get the badge to display.

    ![Max Product Age 999](/help/commerce-cloud/assets/customize-cif-components/max-age-working.png)

9. Finally, search the AEM logs to see the log statement entered in step 5 above. This should print the value of the `created_at` property that is coming from Magento. You can view the logs of AEM by opening the `error.log` file. This file is located beneath the `crx-quickstart/logs/error.log` where the AEM jar has been installed. You can expect to see a line item like the following:

    ```plain
    com.acme.cif.core.models.MyProductTeaser ***CREATED_AT**** 2019-06-05 06:51:33
    ```

    Now you can verify that the logic we implemented is correct!

### Congratulations!

You just customized your first CIF component! Download the [finished solution package here](/help/commerce-cloud/assets/customize-cif-components/acme-store-solution.zip).


## Advanced URL Configurations

[AEM CIF Core Components](https://github.com/adobe/aem-core-cif-components) provides advanced configurations to customize the URLs for product and category pages. Many implementations will customize these URLs for search engine optimization (SEO) purposes.  The following video details how to configure the `UrlProvider` Service and features of [Sling Mapping](https://sling.apache.org/documentation/the-sling-engine/mappings-for-resource-resolution.html) to customize the URLs for product and category pages.

>[!VIDEO](https://video.tv.adobe.com/v/34350/?quality=12)

You can find more information on this topic from the following resource(s):

- [CIF URL Provider Configuration](https://github.com/adobe/aem-core-cif-components/wiki/configuration#configuring-and-customising-product-and-category-pages-urls)
- [Sling Mappings](https://sling.apache.org/documentation/the-sling-engine/mappings-for-resource-resolution.html)


## Additional Resources

* [AEM CIF Archetype](https://github.com/adobe/aem-cif-project-archetype)
* [AEM CIF components](https://github.com/adobe/aem-core-cif-components)
* [Customizing CIF Core Components](https://github.com/adobe/aem-core-cif-components/wiki/Customizing-CIF-Core-Components)
* [Customizing Core Components](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/developing/customizing.html)
* [AEM CIF connector and authoring tools](https://github.com/adobe/commerce-cif-connector)
* [Set up a Local AEM Development Environment](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html)
* [Client-Side Libraries](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html)
* [Getting Started with AEM Sites](https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/overview.html)
* [Developing with the Style System](https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/style-system.html)
