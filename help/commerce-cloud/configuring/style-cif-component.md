---
title: Style CIF Core Components
description: Style CIF Core Components
---

# Style CIF Core Components

The [CIF Project archetype](https://github.com/adobe/aem-cif-project-archetype) creates a minimal Adobe Experience Manager (AEM) CIF project as a starting point for customer projects using [CIF Core Components](https://github.com/adobe/aem-core-cif-components). A default style, known as the Venia brand, is initially applied to the site. In this tutorial you will inspect a new AEM CIF project, generated by the archetype and understand how CSS and JavaScript used by CIF core components are organized. You will also create a new style using CSS to replace the default style of the Product Teaser component.

![What you will build](/help/commerce-cloud/assets/style-cif-component/what-you-will-build.png)

*A new style will be implemented for the Product Teaser component that resembles a card.*

## Prerequisites

The following tools and technologies are required:

* [Java 1.8](https://www.oracle.com/technetwork/java/javase/downloads/index.html) or [Java 11](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html) (AEM 6.5+ only)
* [Apache Maven](https://maven.apache.org/) (3.3.9 or newer)
* Adobe Experience Manager (local instance)
  * [AEM 6.5](https://docs.adobe.com/content/help/en/experience-manager-65/deploying/introduction/technical-requirements.html)
  * [AEM 6.4.4+](https://docs.adobe.com/content/help/en/experience-manager-64/release-notes/sp-release-notes.html)
* Magento running a [version compatible to the archetype](https://github.com/adobe/aem-cif-project-archetype#requirements)

## Generate a project

We will generate a new AEM CIF project using the [CIF Project archetype](https://github.com/adobe/aem-cif-project-archetype) and then override the default styles. 

**Feel free to use an existing project** (based on the CIF Project Archetype) and skip this section.

1. Determine the latest version of the CIF Project Archetype by viewing [the latest release on GitHub](https://github.com/adobe/aem-cif-project-archetype/releases/latest). In the next step replace `x.y.z` with the version of the latest release.

2. Run the following Maven command to generate a new project in [batch mode](https://maven.apache.org/archetype/maven-archetype-plugin/examples/generate-batch.html).

    ```terminal
    mvn archetype:generate -B \
        -DarchetypeGroupId="com.adobe.commerce.cif" \
        -DarchetypeArtifactId="cif-project-archetype" \
        -DarchetypeVersion=x.y.z \
        -DgroupId="com.acme.cif" \
        -DartifactId="acme-store" \
        -Dversion=0.0.1-SNAPSHOT \
        -Dpackage="com.acme.cif" \
        -DappsFolderName="acme" \
        -DartifactName="Acme Store" \
        -DcontentFolderName="acme" \
        -DpackageGroup="acme" \
        -DsiteName="Acme Store" \
        -DoptionAemVersion=6.5.0 \
        -DoptionIncludeExamples=y \
        -DoptionEmbedConnector=y
    ```

3. Build and deploy the project to a local instance of AEM:

    ```shell
    $ cd acme-store/
    $ mvn clean install -PautoInstallAll
    ```

4. Add the necessary OSGi configurations to connect your AEM instance to a Magento instance or add the configurations to the newly created project.

5. At this point you should have a working version of a storefront that is connected to a Magento instance. Navigate to the `US` > `Home` page at: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html)

    You should see that the storefront currently is using the Venia theme. Expanding the Main Menu of the storefront, you should see various categories, indicating that the connection Magento is working.

    ![Storefront configured with Venia Theme](/help/commerce-cloud/assets/style-cif-component/acme-store-configured.png)

## Introduction to Client Libraries

The CSS and JavaScript responsible for rendering the theme/styles of the storefront is managed in AEM by a [Client library](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html) or clientlibs for short. Client libraries provide a mechanism to organize CSS and Javascript in a project's code and then deliver onto the page.

The way we can apply brand specific styles to CIF Core Components is by adding and overriding the CSS managed by these client libraries. Understanding how client libraries are structured and included on the page is critical.

### Project Client Libraries

Next we will inspect the client libraries generated automatically by the archetype. Use the IDE of your choice to [import the project generated in the previous exercise](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html#set-up-an-integrated-development-environment).

1. Navigate and expand the **ui.apps** module and expand the folder hierarchy to: `ui.apps/src/main/content/jcr_root/apps/acme/clientlibs`:

    ![ui.apps clientlibs](/help/commerce-cloud/assets/style-cif-component/ui-apps-clientli-folder.png)

    There are two folders beneath, **clientlib-base** and **theme**.

2. **clientlib-base** - This is an empty client library that simply embeds the necessary dependencies from [AEM Core Components](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/introduction.html).

    ![Clientlib-base](/help/commerce-cloud/assets/style-cif-component/clientlib-base-folderhierarchy.png)

    Below is the XML definition of **clientlib-base** (the `.content.xml` file):

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
        jcr:primaryType="cq:ClientLibraryFolder"
        allowProxy="{Boolean}true"
        categories="[acme.wcm.base]"
        embed="[core.wcm.components.accordion.v1,core.wcm.components.tabs.v1,core.wcm.components.carousel.v1,core.wcm.components.image.v2,core.wcm.components.breadcrumb.v2,core.wcm.components.search.v1,core.wcm.components.form.text.v2]"/>
    ```

    `acme.wcm.base` is the category for this client library. Think of a catgory as a tag. This will be used to include or embed the library on the page. 

    Notice the `embed` property and the array of other clientlib categories. Each of these categories represent a client library. For example, `core.wcm.components.accordion.v1` includes the javascript needed for the [Accordion component](https://docs.adobe.com/content/help/en/experience-manager-core-components/using/components/accordion.html) to work.

    By using the `embed` and `categories` properties you can manage and include client libraries from different projects.

     `allowProxy=true` ensures that the client library CSS and JavaScript will be served from a path prefixed with: `/etc.clientlibs`. This ensures that application code under `/apps` remains protected from end-users but CSS and JavaScript necessary for the website to function can be served anonymously. More details about the [allowProxy property can be found here](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html#locating-a-client-library-folder-and-using-the-proxy-client-libraries-servlet).

3. **theme** - This is the client library that contains the starting theme and CSS for the CIF project. This client library is designed to be customized by each implementation, and it is helpful to start with some existing styles so that the components are functional to start with.

    ![theme clientlibrary](/help/commerce-cloud/assets/style-cif-component/clientlib-theme-folder-hierarchy.png)

    Below is the XML definition of **theme**:

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
        jcr:primaryType="cq:ClientLibraryFolder"
        allowProxy="{Boolean}true"
        categories="[acme.theme]"/>
    ```

    `acme.theme` is the category for this client library and this is how the client library will be included on the page.

4. Beneath the **theme** client library you should see a file named **css.txt** located at: `ui.apps/src/main/content/jcr_root/apps/acme/clientlibs/theme/css.txt`:

    ```plain
    #base=.
    common/common.css

    components/button/button.css

    components/featuredcategorylist/categorylist.css

    ...
    ```

    The **css.txt** (and **js.txt**) act as manifests that dictate the order in which individual files are included in the final CSS file. Order matters for both CSS and JavaScript and it is nice to be able to create multiple files in order to manage the code better. Looking through the **css.txt** file you can see that files are organized by the components the styles are applied to.

5. Inspect the CSS files beneath the **theme/components** to get an idea of the ootb component styles. We will update some of these files later in the tutorial.

### Client Library inclusion with Base Page Component

Next we will inspect how client libraries are included on a page using [HTL](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html#using-htl) and the Page component.

1. In the **ui.apps** module, navigate to the `page` component definition under: `ui.apps/src/main/content/jcr_root/apps/acme/components/structure/page`. This **page** component, generated by the archetype, is the entry point used to render  all the pages in the project.

2. If you inspect the **page** component's definition (`page/.content.xml`) you will notice a property `sling:resourceSuperType` that points to `core/cif/components/structure/page/v1/page`. This means that our project's (Acme) **page** component will inherit all of the functionality of the [CIF Core Page](https://github.com/adobe/aem-core-cif-components/tree/master/ui.apps/src/main/content/jcr_root/apps/core/cif/components/structure/page/v1/page) component, and allowing us to manage less code.

3. Beneath the **page** component you will find two files: **customheaderlibs.html** and **customfooterlibs.html**.

    ```html
    <!--/* customheaderlibs.html */-->
    <sly data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"
     data-sly-call="${clientlib.css @ categories='acme.wcm.base'}"/>
    ```

    **customheaderlibs.html** is an HTL script that will be rendered at the head of the page. It is a common script to override and add project specific logic. In this case we are using it to include the client library with a category of `acme.wcm.base`. Following web development best practices, we only include the CSS in the head of the page.

    ```html
    <!--/* customfooterlibs.html */-->
    <sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html">
        <sly data-sly-call="${clientlib.js @ categories='acme.wcm.base'}"/>
    </sly>
    ```

    **customfooterlibs.html** is an HTL script that will be rendered at the bottom of the page, right before the closing `</body>` tag. Again the category of `acme.wcm.base` is used but this time only the JavaScript of the client library will be loaded.

Modifying the HTL scripts of the **page** component is how `acme.wcm.base` is included on all of the pages. However what about `acme.theme`? In the next exercise we will look at another option for including client libraries.

### Client Library inclusion with Page Templates

There are several options for how to include a client-side library. Next we will inspect how the generated project includes the theme client-side libraries via [Page Templates](https://docs.adobe.com/content/help/en/experience-manager-65/developing/platform/templates/page-templates-editable.html).

Open a new browser and login to the AEM instance in which you deployed the project at the beginning of this tutorial.

1. From the AEM Start screen navigate to **Tools** > **General** > **Templates**.

    ![Template Navigation](/help/commerce-cloud/assets/style-cif-component/template-location.png)

2. Navigate into the **Acme Store Configuration** folder. Open the **Category Page Template** by selecting the *pencil* icon.

    ![category page template card](/help/commerce-cloud/assets/style-cif-component/category-page-template.png)

3. In the upper left-hand corner, select the **Page Information** icon and click **Page Policy**.

    ![Page policy menu item](/help/commerce-cloud/assets/style-cif-component/page-policy-menu.png)

4. This will open the Page Policy for the Catalog Page template:

    ![Page Policy - catalog page](/help/commerce-cloud/assets/style-cif-component/page-policy-properties.png)

    On the right-hand side you can see a listing of Client Libraries **categories** that will be included on all pages that use this template.

    * **wcm.foundation.components.page.responsive** - Provides the CSS needed to enable [responsive layout](https://docs.adobe.com/content/help/en/experience-manager-65/authoring/siteandpage/responsive-layout.html) controls by authors.
    * **acme.theme** - This is the starting theme that the archetype generates automatically. By default this styled like the sample Venia demo store. However as you can see from the name, it is intended to be customized by the project implementation. *This is what we will be modifying in the next section!*
    * **core.cif.components.react** - This is a compiled Client Library of several React components used for dynamic features like the Shopping Cart. More [information can be found here](https://github.com/adobe/aem-core-cif-components/tree/master/react-components).

    Notice that other templates use the same policy, **Content Page**, **Landing Page**, etc... By re-using the same policy, we can ensure that the same client libraries are included on all of the pages.

    The advantage of using Templates and Page policies to manage the inclusion of client libraries is that you can change the policy per template. For example, perhaps you are managing two different brands within the same AEM instance. Each brand will have its own unique style or *theme* but the base libraries and code will be the same. Another example, if you had a larger client library that you only wanted to appear on certain pages, you could make a unique page policy just for that template. The other advantage

### Verify Client Libraries on the Page

At this point we have reviewed how to include client libraries using HTL with the **customheaderlibs.html** and **customfooterlibs.html** scripts and how a Template's page policy can be used to include additional client libraries. Next we will verify the inclusion of the client libraries on the site.

1. From the AEM Start screen navigate to **Sites** > **Acme Store** > **United States** > **English** and open the page for editing: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html).

2. Select the **Page Information** menu and click **View as Published**:

    ![View as Published](/help/commerce-cloud/assets/style-cif-component/view-as-published.png)

    This will open the page without any of the AEM author javascript loaded, as it would appear on the published site. Notice that the url has the query parameter `?wcmmode=disabled` appendended. When developing CSS and Javascript it is a good practice to use this parameter to simplify the page with out anything from AEM author.

3. View the page source and you should be able to identify the following client libraries are included: **acme.wcm.base**, **wcm.foundation.components.page.responsive**, **acme.theme**, **core.cif.components.react**

    ```html
    <!DOCTYPE html>
    <html lang="en-US">
    <head>
        ...
        <link rel="stylesheet" href="/etc.clientlibs/acme/clientlibs/clientlib-base.css" type="text/css">
        <link rel="stylesheet" href="/libs/wcm/foundation/components/page/responsive.css" type="text/css">
        <link rel="stylesheet" href="/etc.clientlibs/acme/clientlibs/theme.css" type="text/css">
    </head>
    ...

        <script type="text/javascript" src="/etc.clientlibs/core/cif/clientlibs/react-components.js"></script>
        <script type="text/javascript" src="/etc.clientlibs/acme/clientlibs/clientlib-base.js"></script>
    </body>
    </html>
    ```

## Style the Product Teaser

Now that we understand the client library structure generated by the archetype, we can begin to customize the CIF components. We will modify the styles of the Product Teaser component so that it looks more like a "card".

### Author the Product Teaser

As a first step, we will add a new instance of the Product Teaser component to the home page of our site using the AEM authoring tools.

1. Open a new browser tab and navigate to the **Home Page** of the site: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html).
2. Insert a new **Product Teaser** Component into the main layout container on the page.

    ![Insert Product Teaser](/help/commerce-cloud/assets/style-cif-component/product-teaser-add-component.png)

3. Expand the Side Panel (if not already toggled) and switch the asset finder dropdown to **Products**. This should display a list of available products from a connected Magento instance. Select a product and **drag+drop** it onto the **Product Teaser** component on the page.

    ![Drag + Drop Product Teaser](/help/commerce-cloud/assets/style-cif-component/drag-drop-product-teaser.png)

    > Note, you can also configure the displayed product by configuring the component using the dialog (clicking the *wrench* icon).

4. You should now see a Product being displayed by the Product Teaser. The Name of the product and the Price of the product are default attributes that are displayed.

    ![Product Teaser - default style](/help/commerce-cloud/assets/style-cif-component/product-teaser-default-style.png)

### Update the CSS for the Product Teaser

Next we will modify the CSS in the **theme** client library in order to implement a card-like style for the Product Teaser.

Return to the IDE and the generated project.

1. In the **ui.apps** module navigate to folder: `ui.apps/src/main/content/jcr_root/apps/acme/clientlibs/theme/components/productteaser`. This is where all of the styles for the Product Teaser are defined.
2. Open the file **teaser.css** and update the corresponding CSS rules (or download the [solution teaser.css file](/help/commerce-cloud/assets/style-cif-component/solution-teaser.css) and replace).

    Add a drop-shadow and include rounded corners to the Product Teaser.

    ```css
     .productteaser .item__root {
         position: relative;
         box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
         transition: 0.3s;
         border-radius: 5px;
         float: left;
         margin-left: 12px;
         margin-right: 12px;
    }

    .productteaser .item__root:hover {
       box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }
    ```

    Change the border for the image in the Product Teaser.

    ```css
    .productteaser .item__image {
        border-bottom: 1px solid #c0c0c0;
        display: block;
        grid-area: main;
        height: auto;
        opacity: 1;
        transition-duration: 512ms;
        transition-property: opacity, visibility;
        transition-timing-function: ease-out;
        visibility: visible;
        width: 100%;
     }
    ```

    Update the Product's name to appear at the bottom of the teaser and modify the text color.

    ```css
    .productteaser .item__name {
        color: #000;
        display: block;
        float: left;
        font-size: 22px;
        font-weight: 900;
        line-height: 1em;
        padding: 0.75em;
        text-transform: uppercase;
        width: 75%;
    }
    ```

    Update the Product's price to also appear in the bottom of the teaser and modify the text color.

    ```css
    .productteaser .item__price {
        color: #000;
        display: block;
        float: left;
        font-size: 18px;
        font-weight: 900;
        padding: 0.75em;
        padding-bottom: 2em;
        width: 25%;
    }
    ```

    Update the media query at the bottom, to stack the name and price in screens smaller than 992px.

    ```css
    @media (max-width: 992px) {
        .productteaser .item__name {
            font-size: 18px;
            width: 100%;
        }
        .productteaser .item__price {
            font-size: 14px;
            width: 100%;
        }
    }
    ```

    Save the changes to **teaser.css**. You can download the [solution teaser.css file here](/help/commerce-cloud/assets/style-cif-component/solution-teaser.css).

3. Deploy the updates of the **ui.apps** module to AEM using your Maven skills, from a command line terminal:

    ```shell
    $ cd acme-store/ui.apps/
    $ mvn -PautoInstallPackage clean install
    ...
    saving approx 0 nodes...
    Package imported.
    Package installed in 61ms.
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time:  6.903 s
    [INFO] Finished at: 2020-02-06T13:21:36-08:00
    [INFO] ------------------------------------------------------------------------
    ```

    > Note, there are [additional IDE setup and tools](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html#set-up-an-integrated-development-environment) that can sync project files directly to a local AEM instance without having to perform a full Maven build.

### View Updated Product Teaser

After the code for the project has been deployed to AEM, we should now be able to see the changes to the Product Teaser.

1. Return to your browser and re-fresh the Home page: [http://localhost:4502/editor.html/content/acme/us/en.html](http://localhost:4502/editor.html/content/acme/us/en.html). You should see the updated product teaser styles applied.

    ![Updated Product Teaser style](/help/commerce-cloud/assets/style-cif-component/product-teaser-new-style.png)

2. Experiment by adding additional Product teasers. Use Layout Mode to change the width and offset of the components in order to display multiple teasers in a row.

    ![Multiple Product Teasers](/help/commerce-cloud/assets/style-cif-component/multiple-teasers-final.png)

    Notice that each product teaser contains the same style.

### Troubleshooting

You can verify in [CRXDE-Lite](http://localhost:4502/crx/de/index.jsp) that the updated CSS file has been deployed: [http://localhost:4502/crx/de/index.jsp#/apps/acme/clientlibs/theme/components/productteaser/teaser.css](http://localhost:4502/crx/de/index.jsp#/apps/acme/clientlibs/theme/components/productteaser/teaser.css)

When deploying new CSS and/or JavaScript files it is also important to ensure the browser is not serving stale files. You can eliminate this by clearing the browser cache or starting a fresh browser session.

AEM also attempts to cache client libraries for performance. Occasionally, following a code deployment the older files are served. You can manually invalidate AEM's client library cache using the [Rebuild Client Libraries tool](http://localhost:4502/libs/granite/ui/content/dumplibs.rebuild.html). *Invalidate Caches is the preferred method if you suspect AEM has cached an old version of a client library. Rebuild Libraries is inefficient and time consuming.*

### Congratulations!

You just styled your first CIF component!

### Bonus Challenge

Use the [AEM Style system](https://docs.adobe.com/content/help/en/experience-manager-65/developing/components/style-system.html) to create two styles that can be toggled on/off by a content author. [Developing with the Style System](https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/style-system.html) includes detailed steps and information on how to accomplish this.

![Bonus Challenge - style System](/help/commerce-cloud/assets/style-cif-component/bonus-challenge.png)

## Additional Resources

* [AEM CIF Archetype](https://github.com/adobe/aem-cif-project-archetype)
* [AEM CIF components](https://github.com/adobe/aem-core-cif-components)
* [AEM CIF connector and authoring tools](https://github.com/adobe/commerce-cif-connector)
* [Set up a Local AEM Development Environment](https://docs.adobe.com/content/help/en/experience-manager-learn/foundation/development/set-up-a-local-aem-development-environment.html)
* [Client-Side Libraries](https://docs.adobe.com/content/help/en/experience-manager-65/developing/introduction/clientlibs.html)
* [Getting Started with AEM Sites](https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/overview.html)
* [Developing with the Style System](https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/style-system.html)